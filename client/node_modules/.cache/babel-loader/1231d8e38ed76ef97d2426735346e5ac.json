{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/felix/react-nodejs/client/src/components/Chat/chat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport queryStrig from 'query-string';\nimport io from 'socket.io-client';\nimport './chat.css';\nlet socket;\n\nconst Chat = ({\n  location\n}) => {\n  _s();\n\n  const [name, setName] = useState('');\n  const [room, setRoom] = useState('');\n  const [message, setMessage] = useState('');\n  const [messages, setMessages] = useState([]);\n  const ENDPOINT = 'http://localhost:5000';\n  useEffect(() => {\n    const {\n      name,\n      room\n    } = queryStrig.parse(location.search);\n    socket = io(ENDPOINT);\n    setName(name);\n    setRoom(room);\n    socket.emit('join', {\n      name,\n      room\n    }, () => {});\n    return () => {\n      socket.emit('disconnect');\n      socket.off();\n    };\n  }, [ENDPOINT, location.search]);\n  useEffect(() => {\n    socket.on('message', message => {\n      setMessages([...messages, message]);\n    });\n  }, [messages]);\n\n  const sendmessage = e => {\n    e.preventDefault();\n\n    if (message) {\n      socket.emit('sendMessage', message, () => setMessage(''));\n    }\n  };\n\n  console.log(messages, message);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"OuterContaier\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        value: message,\n        onChange: e => setMessage(e.target.value),\n        onKeyPress: e => e.key === 'Enter' ? sendmessage(e) : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 10\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Chat, \"V/zz/NCS5CF8FNR9V0MXcWNSfdM=\");\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"sources":["/home/felix/react-nodejs/client/src/components/Chat/chat.js"],"names":["React","useState","useEffect","queryStrig","io","socket","Chat","location","name","setName","room","setRoom","message","setMessage","messages","setMessages","ENDPOINT","parse","search","emit","off","on","sendmessage","e","preventDefault","console","log","target","value","key"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAcC,QAAd,EAAuBC,SAAvB,QAAuC,OAAvC;AACA,OAAOC,UAAP,MAAuB,cAAvB;AACA,OAAOC,EAAP,MAAe,kBAAf;AACA,OAAO,YAAP;AACA,IAAIC,MAAJ;;AAEA,MAAMC,IAAI,GAAC,CAAC;AAACC,EAAAA;AAAD,CAAD,KAAc;AAAA;;AACrB,QAAK,CAACC,IAAD,EAAMC,OAAN,IAAeR,QAAQ,CAAC,EAAD,CAA5B;AACA,QAAM,CAACS,IAAD,EAAMC,OAAN,IAAeV,QAAQ,CAAC,EAAD,CAA7B;AACA,QAAK,CAACW,OAAD,EAASC,UAAT,IAAqBZ,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAK,CAACa,QAAD,EAAUC,WAAV,IAAuBd,QAAQ,CAAC,EAAD,CAApC;AACA,QAAMe,QAAQ,GAAC,uBAAf;AAEAd,EAAAA,SAAS,CAAC,MAAI;AAClB,UAAM;AAACM,MAAAA,IAAD;AAAME,MAAAA;AAAN,QAAaP,UAAU,CAACc,KAAX,CAAiBV,QAAQ,CAACW,MAA1B,CAAnB;AACEb,IAAAA,MAAM,GAACD,EAAE,CAACY,QAAD,CAAT;AACAP,IAAAA,OAAO,CAACD,IAAD,CAAP;AACAG,IAAAA,OAAO,CAACD,IAAD,CAAP;AACFL,IAAAA,MAAM,CAACc,IAAP,CAAY,MAAZ,EAAmB;AAACX,MAAAA,IAAD;AAAME,MAAAA;AAAN,KAAnB,EAA+B,MAAI,CAGlC,CAHD;AAIA,WAAO,MAAI;AACPL,MAAAA,MAAM,CAACc,IAAP,CAAY,YAAZ;AACAd,MAAAA,MAAM,CAACe,GAAP;AACH,KAHD;AAIK,GAbQ,EAaP,CAACJ,QAAD,EAAWT,QAAQ,CAACW,MAApB,CAbO,CAAT;AAcAhB,EAAAA,SAAS,CAAC,MAAI;AAEVG,IAAAA,MAAM,CAACgB,EAAP,CAAU,SAAV,EAAqBT,OAAD,IAAW;AAC3BG,MAAAA,WAAW,CAAC,CAAC,GAAGD,QAAJ,EAAaF,OAAb,CAAD,CAAX;AAEH,KAHD;AAIH,GANQ,EAMP,CAACE,QAAD,CANO,CAAT;;AAQA,QAAMQ,WAAW,GAAEC,CAAD,IAAK;AACnBA,IAAAA,CAAC,CAACC,cAAF;;AAEA,QAAGZ,OAAH,EAAW;AACPP,MAAAA,MAAM,CAACc,IAAP,CAAY,aAAZ,EAA0BP,OAA1B,EAAkC,MAAIC,UAAU,CAAC,EAAD,CAAhD;AACH;AACJ,GAND;;AAOAY,EAAAA,OAAO,CAACC,GAAR,CAAYZ,QAAZ,EAAqBF,OAArB;AACA,sBACI;AAAM,IAAA,SAAS,EAAC,eAAhB;AAAA,2BAEC;AAAM,MAAA,SAAS,EAAC,WAAhB;AAAA,6BACP;AAAO,QAAA,KAAK,EAAEA,OAAd;AAAsB,QAAA,QAAQ,EAAGW,CAAD,IAAKV,UAAU,CAACU,CAAC,CAACI,MAAF,CAASC,KAAV,CAA/C;AACA,QAAA,UAAU,EAAEL,CAAC,IAAEA,CAAC,CAACM,GAAF,KAAQ,OAAR,GAAiBP,WAAW,CAACC,CAAD,CAA5B,GAAgC;AAD/C;AAAA;AAAA;AAAA;AAAA;AADO;AAAA;AAAA;AAAA;AAAA;AAFD;AAAA;AAAA;AAAA;AAAA,UADJ;AAUH,CA/CD;;GAAMjB,I;;KAAAA,I;AAgDN,eAAeA,IAAf","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport queryStrig from 'query-string';\nimport io from 'socket.io-client';\nimport './chat.css'\nlet socket;\n\nconst Chat=({location})=>{\n    const[name,setName]=useState('')\n    const [room,setRoom]=useState('')\n    const[message,setMessage]=useState('')\n    const[messages,setMessages]=useState([])\n    const ENDPOINT='http://localhost:5000'\n\n    useEffect(()=>{\nconst {name,room} =queryStrig.parse(location.search)\n  socket=io(ENDPOINT);\n  setName(name)\n  setRoom(room)\nsocket.emit('join',{name,room},()=>{\n\n\n})\nreturn ()=>{\n    socket.emit('disconnect')\n    socket.off()\n}\n    },[ENDPOINT, location.search])\n    useEffect(()=>{\n\n        socket.on('message',(message)=>{\n            setMessages([...messages,message])\n\n        })\n    },[messages])\n\n    const sendmessage=(e)=>{\n        e.preventDefault()\n\n        if(message){\n            socket.emit('sendMessage',message,()=>setMessage(''))\n        }\n    }\n    console.log(messages,message)\n    return(\n        <div  className=\"OuterContaier\">\n         \n         <div  className=\"container\">\n  <input value={message}onChange={(e)=>setMessage(e.target.value)}\n  onKeyPress={e=>e.key==='Enter'? sendmessage(e):null}/>\n         </div>\n        </div>\n    )\n\n}\nexport default Chat"]},"metadata":{},"sourceType":"module"}